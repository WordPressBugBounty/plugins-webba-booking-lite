(()=>{"use strict";var e={1455:e=>{e.exports=window.wp.apiFetch},47143:e=>{e.exports=window.wp.data}},t={};function s(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,s),a.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o=s(1455),r=s.n(o),a=s(47143);const n=window.wp.url,{lang:i}=(()=>{const e=document.documentElement?.lang||"en-US",[t,s=""]=e.split("-");return{lang:t,locale:e,localeCode:s}})(),u={userFutureBookings:null,userPastBookings:null,preset:{},formData:{services:[],offset:null,date:null,booking:null,time:null},dynamicAttributes:{timeSlots:null}},g={setUserFutureBookings:e=>({type:"SET_USER_FUTURE_BOOKING",bookings:e}),setUserPastBookings:e=>({type:"SET_USER_PAST_BOOKING",bookings:e}),setPreset:e=>({type:"SET_PRESET",preset:e}),setUserName:e=>({type:"SET_USER_NAME",userName:e}),setFormData:(e,t)=>({type:"SET_FORM_DATA",key:e,value:t}),setDynamicAttribute:(e,t)=>({type:"SET_DYNAMIC_ATTRIBUTE",key:e,value:t}),fetchTimeSlots:()=>async({select:e,dispatch:t})=>{const s=new URLSearchParams(e.getFormData()).toString(),o=await r()({path:`/wbk/v2/get-time-slots/?${s}`});t.setDynamicAttribute("timeSlots",o.timeslots)},updateBooking:()=>async({select:e,dispatch:t})=>{const s=await r()({path:"/wbk/v2/update-booking",method:"POST",data:e.getFormData()});let o=e.getUserFutureBookings();const a=o.findIndex((e=>!!Number.isInteger(Number(e.id))&&e.id===s.booking.id));-1!==a&&(o[a]={...o[a],...s.booking}),t.setUserFutureBookings(o)},deleteBooking:()=>async({select:e,dispatch:t})=>{await r()({path:"/wbk/v2/delete-booking",method:"POST",data:e.getFormData()});const s=e.getUserFutureBookings().filter((t=>t.id!==e.getFormData().booking));t.setUserFutureBookings(s)}},c=(0,a.createReduxStore)("webba_booking/frontend_store",{reducer(e=u,t){switch(t.type){case"SET_USER_FUTURE_BOOKING":return{...e,userFutureBookings:t.bookings};case"SET_USER_PAST_BOOKING":return{...e,userPastBookings:t.bookings};case"SET_PRESET":return{...e,preset:t.preset};case"SET_USER_NAME":return{...e,preset:{...e.preset,user:t.userName}};case"SET_FORM_DATA":return{...e,formData:{...e.formData,[t.key]:t.value}};case"SET_DYNAMIC_ATTRIBUTE":return{...e,dynamicAttributes:{...e.dynamicAttributes,[t.key]:t.value}}}return e},actions:g,selectors:{getUserFutureBookings:e=>e.userFutureBookings,getUserPastBookings:e=>e.userPastBookings,getPreset:e=>e.preset,getFormData:e=>e.formData,getDynamicAttributes:e=>e.dynamicAttributes,getSelectedDate:e=>e.seletedDate},resolvers:{getUserFutureBookings:()=>async({dispatch:e})=>{const t=await r()({path:(0,n.addQueryArgs)("/wbk/v2/get-user-bookings/",{lang:i})});e.setUserFutureBookings(t.bookings)},getUserPastBookings:()=>async({dispatch:e})=>{const t=new URLSearchParams({pastBookings:!0,lang:i}).toString(),s=await r()({path:`/wbk/v2/get-user-bookings/?${t}`});e.setUserPastBookings(s.bookings)},getPreset:()=>async({dispatch:e})=>{const t=await r()({path:"/wbk/v2/get-preset/"});e.setPreset(t)}}});(0,a.register)(c)})();