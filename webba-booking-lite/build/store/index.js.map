{"version":3,"file":"store/index.js","mappings":"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","sources":["webpack://webba-booking/./src/frontend/hooks/useLocale.jsx","webpack://webba-booking/external window [\"wp\",\"apiFetch\"]","webpack://webba-booking/external window [\"wp\",\"data\"]","webpack://webba-booking/external window [\"wp\",\"url\"]","webpack://webba-booking/webpack/bootstrap","webpack://webba-booking/webpack/runtime/compat get default export","webpack://webba-booking/webpack/runtime/define property getters","webpack://webba-booking/webpack/runtime/hasOwnProperty shorthand","webpack://webba-booking/webpack/runtime/make namespace object","webpack://webba-booking/./src/store/frontend/index.js"],"sourcesContent":["export const useLocale = () => {\n    const locale = document.documentElement?.lang || 'en-US'\n    const [lang, localeCode = ''] = locale.split('-')\n    return { lang, locale, localeCode }\n}\n","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"url\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import apiFetch from '@wordpress/api-fetch'\nimport { createReduxStore, register } from '@wordpress/data'\nimport { useLocale } from '../../frontend/hooks/useLocale'\nimport { addQueryArgs } from '@wordpress/url';\n\nconst { lang } = useLocale();\n\nconst DEFAULT_STATE = {\n    userFutureBookings: null,\n    userPastBookings: null,\n    preset: {},\n    formData: {\n        services: [],\n        offset: null,\n        date: null,\n        booking: null,\n        time: null,\n    },\n    dynamicAttributes: {\n        timeSlots: null,\n    },\n}\n\nconst actions = {\n    setUserFutureBookings(bookings) {\n        return {\n            type: 'SET_USER_FUTURE_BOOKING',\n            bookings,\n        }\n    },\n    setUserPastBookings(bookings) {\n        return {\n            type: 'SET_USER_PAST_BOOKING',\n            bookings,\n        }\n    },\n    setPreset(preset) {\n        return {\n            type: 'SET_PRESET',\n            preset,\n        }\n    },\n    setUserName(userName) {\n        return {\n            type: 'SET_USER_NAME',\n            userName,\n        }\n    },\n    setFormData(key, value) {\n        return {\n            type: 'SET_FORM_DATA',\n            key,\n            value,\n        }\n    },\n    setDynamicAttribute(key, value) {\n        return {\n            type: 'SET_DYNAMIC_ATTRIBUTE',\n            key,\n            value,\n        }\n    },\n    fetchTimeSlots:\n        () =>\n            async ({ select, dispatch }) => {\n                const queryString = new URLSearchParams(\n                    select.getFormData()\n                ).toString()\n                const response = await apiFetch({\n                    path: `/wbk/v2/get-time-slots/?${queryString}`,\n                })\n\n                dispatch.setDynamicAttribute('timeSlots', response.timeslots)\n            },\n    updateBooking:\n        () =>\n            async ({ select, dispatch }) => {\n                const response = await apiFetch({\n                    path: `/wbk/v2/update-booking`,\n                    method: 'POST',\n                    data: select.getFormData(),\n                })\n                let bookings = select.getUserFutureBookings()\n                const index = bookings.findIndex((booking) => {\n                    if (!Number.isInteger(Number(booking.id))) {\n                        return false\n                    }\n                    return booking.id === response.booking.id\n                })\n                if (index !== -1) {\n                    bookings[index] = {\n                        ...bookings[index],\n                        ...response.booking,\n                    }\n                }\n                dispatch.setUserFutureBookings(bookings)\n            },\n    deleteBooking:\n        () =>\n            async ({ select, dispatch }) => {\n                const response = await apiFetch({\n                    path: `/wbk/v2/delete-booking`,\n                    method: 'POST',\n                    data: select.getFormData(),\n                })\n                let bookings = select.getUserFutureBookings()\n                const updatedBookings = bookings.filter(\n                    (booking) => booking.id !== select.getFormData().booking\n                )\n                dispatch.setUserFutureBookings(updatedBookings)\n            },\n}\nconst store = createReduxStore('webba_booking/frontend_store', {\n    reducer(state = DEFAULT_STATE, action) {\n        switch (action.type) {\n            case 'SET_USER_FUTURE_BOOKING':\n                return {\n                    ...state,\n                    userFutureBookings: action.bookings,\n                }\n            case 'SET_USER_PAST_BOOKING':\n                return {\n                    ...state,\n                    userPastBookings: action.bookings,\n                }\n            case 'SET_PRESET':\n                return {\n                    ...state,\n                    preset: action.preset,\n                }\n            case 'SET_USER_NAME':\n                return {\n                    ...state,\n                    preset: {\n                        ...state.preset,\n                        user: action.userName,\n                    },\n                }\n            case 'SET_FORM_DATA':\n                return {\n                    ...state,\n                    formData: { ...state.formData, [action.key]: action.value },\n                }\n            case 'SET_DYNAMIC_ATTRIBUTE':\n                return {\n                    ...state,\n                    dynamicAttributes: {\n                        ...state.dynamicAttributes,\n                        [action.key]: action.value,\n                    },\n                }\n        }\n        return state\n    },\n    actions,\n    selectors: {\n        getUserFutureBookings(state) {\n            return state.userFutureBookings\n        },\n        getUserPastBookings(state) {\n            return state.userPastBookings\n        },\n        getPreset(state) {\n            return state.preset\n        },\n        getFormData(state) {\n            return state.formData\n        },\n        getDynamicAttributes(state) {\n            return state.dynamicAttributes\n        },\n        getSelectedDate(state) {\n            return state.seletedDate\n        },\n    },\n\n    resolvers: {\n        getUserFutureBookings:\n            () =>\n                async ({ dispatch }) => {\n                    const result = await apiFetch({\n                        path: addQueryArgs(`/wbk/v2/get-user-bookings/`, {\n                            lang,\n                        }),\n                    })\n                    dispatch.setUserFutureBookings(result.bookings)\n                },\n        getUserPastBookings:\n            () =>\n                async ({ dispatch }) => {\n                    const params = {\n                        pastBookings: true,\n                        lang\n                    }\n                    const queryString = new URLSearchParams(params).toString()\n                    const result = await apiFetch({\n                        path: `/wbk/v2/get-user-bookings/?${queryString}`,\n                    })\n                    dispatch.setUserPastBookings(result.bookings)\n                },\n        getPreset:\n            () =>\n                async ({ dispatch }) => {\n                    const result = await apiFetch({\n                        path: `/wbk/v2/get-preset/`,\n                    })\n                    dispatch.setPreset(result)\n                },\n    },\n})\n\nregister(store)\n\nexport const store_name = 'webba_booking/frontend_store'\nexport const default_state = DEFAULT_STATE\n"],"names":["useLocale","locale","document","documentElement","lang","localeCode","split","apiFetch","createReduxStore","register","addQueryArgs","DEFAULT_STATE","userFutureBookings","userPastBookings","preset","formData","services","offset","date","booking","time","dynamicAttributes","timeSlots","actions","setUserFutureBookings","bookings","type","setUserPastBookings","setPreset","setUserName","userName","setFormData","key","value","setDynamicAttribute","fetchTimeSlots","select","dispatch","queryString","URLSearchParams","getFormData","toString","response","path","timeslots","updateBooking","method","data","getUserFutureBookings","index","findIndex","Number","isInteger","id","deleteBooking","updatedBookings","filter","store","reducer","state","action","user","selectors","getUserPastBookings","getPreset","getDynamicAttributes","getSelectedDate","seletedDate","resolvers","result","params","pastBookings","store_name","default_state"],"sourceRoot":""}