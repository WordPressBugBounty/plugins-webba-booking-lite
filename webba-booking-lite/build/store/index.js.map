{"version":3,"file":"store/index.js","mappings":";;;;;;;;;;AAAA;;;;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;;;;ACN2C;AACiB;AAE5D,MAAMG,aAAa,GAAG;EAClBC,kBAAkB,EAAE,IAAI;EACxBC,gBAAgB,EAAE,IAAI;EACtBC,MAAM,EAAE,CAAC,CAAC;EACVC,QAAQ,EAAE;IACNC,QAAQ,EAAE,EAAE;IACZC,MAAM,EAAE,IAAI;IACZC,IAAI,EAAE,IAAI;IACVC,OAAO,EAAE,IAAI;IACbC,IAAI,EAAE;EACV,CAAC;EACDC,iBAAiB,EAAE;IACfC,SAAS,EAAE;EACf;AACJ,CAAC;AAED,MAAMC,OAAO,GAAG;EACZC,qBAAqBA,CAACC,QAAQ,EAAE;IAC5B,OAAO;MACHC,IAAI,EAAE,yBAAyB;MAC/BD;IACJ,CAAC;EACL,CAAC;EACDE,mBAAmBA,CAACF,QAAQ,EAAE;IAC1B,OAAO;MACHC,IAAI,EAAE,uBAAuB;MAC7BD;IACJ,CAAC;EACL,CAAC;EACDG,SAASA,CAACd,MAAM,EAAE;IACd,OAAO;MACHY,IAAI,EAAE,YAAY;MAClBZ;IACJ,CAAC;EACL,CAAC;EACDe,WAAWA,CAACC,QAAQ,EAAE;IAClB,OAAO;MACHJ,IAAI,EAAE,eAAe;MACrBI;IACJ,CAAC;EACL,CAAC;EACDC,WAAWA,CAACC,GAAG,EAAEC,KAAK,EAAE;IACpB,OAAO;MACHP,IAAI,EAAE,eAAe;MACrBM,GAAG;MACHC;IACJ,CAAC;EACL,CAAC;EACDC,mBAAmBA,CAACF,GAAG,EAAEC,KAAK,EAAE;IAC5B,OAAO;MACHP,IAAI,EAAE,uBAAuB;MAC7BM,GAAG;MACHC;IACJ,CAAC;EACL,CAAC;EACDE,cAAc,EACVA,CAAA,KACA,OAAO;IAAEC,MAAM;IAAEC;EAAS,CAAC,KAAK;IAC5B,MAAMC,WAAW,GAAG,IAAIC,eAAe,CACnCH,MAAM,CAACI,WAAW,CAAC,CACvB,CAAC,CAACC,QAAQ,CAAC,CAAC;IACZ,MAAMC,QAAQ,GAAG,MAAMlC,2DAAQ,CAAC;MAC5BmC,IAAI,EAAG,2BAA0BL,WAAY;IACjD,CAAC,CAAC;IAEFD,QAAQ,CAACH,mBAAmB,CAAC,WAAW,EAAEQ,QAAQ,CAACE,SAAS,CAAC;EACjE,CAAC;EACLC,aAAa,EACTA,CAAA,KACA,OAAO;IAAET,MAAM;IAAEC;EAAS,CAAC,KAAK;IAC5B,MAAMK,QAAQ,GAAG,MAAMlC,2DAAQ,CAAC;MAC5BmC,IAAI,EAAG,wBAAuB;MAC9BG,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEX,MAAM,CAACI,WAAW,CAAC;IAC7B,CAAC,CAAC;IACF,IAAIf,QAAQ,GAAGW,MAAM,CAACY,qBAAqB,CAAC,CAAC;IAC7C,MAAMC,KAAK,GAAGxB,QAAQ,CAACyB,SAAS,CAAE/B,OAAO,IAAK;MAC1C,IAAI,CAACgC,MAAM,CAACC,SAAS,CAACD,MAAM,CAAChC,OAAO,CAACkC,EAAE,CAAC,CAAC,EAAE;QACvC,OAAO,KAAK;MAChB;MACA,OAAOlC,OAAO,CAACkC,EAAE,KAAKX,QAAQ,CAACvB,OAAO,CAACkC,EAAE;IAC7C,CAAC,CAAC;IACF,IAAIJ,KAAK,KAAK,CAAC,CAAC,EAAE;MACdxB,QAAQ,CAACwB,KAAK,CAAC,GAAG;QACd,GAAGxB,QAAQ,CAACwB,KAAK,CAAC;QAClB,GAAGP,QAAQ,CAACvB;MAChB,CAAC;IACL;IACAkB,QAAQ,CAACb,qBAAqB,CAACC,QAAQ,CAAC;EAC5C,CAAC;EACL6B,aAAa,EACTA,CAAA,KACA,OAAO;IAAElB,MAAM;IAAEC;EAAS,CAAC,KAAK;IAC5B,MAAMK,QAAQ,GAAG,MAAMlC,2DAAQ,CAAC;MAC5BmC,IAAI,EAAG,wBAAuB;MAC9BG,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEX,MAAM,CAACI,WAAW,CAAC;IAC7B,CAAC,CAAC;IACF,IAAIf,QAAQ,GAAGW,MAAM,CAACY,qBAAqB,CAAC,CAAC;IAC7C,MAAMO,eAAe,GAAG9B,QAAQ,CAAC+B,MAAM,CAClCrC,OAAO,IAAKA,OAAO,CAACkC,EAAE,KAAKjB,MAAM,CAACI,WAAW,CAAC,CAAC,CAACrB,OACrD,CAAC;IACDkB,QAAQ,CAACb,qBAAqB,CAAC+B,eAAe,CAAC;EACnD;AACR,CAAC;AACD,MAAME,KAAK,GAAGhD,iEAAgB,CAAC,8BAA8B,EAAE;EAC3DiD,OAAOA,CAACC,KAAK,GAAGhD,aAAa,EAAEiD,MAAM,EAAE;IACnC,QAAQA,MAAM,CAAClC,IAAI;MACf,KAAK,yBAAyB;QAC1B,OAAO;UACH,GAAGiC,KAAK;UACR/C,kBAAkB,EAAEgD,MAAM,CAACnC;QAC/B,CAAC;MACL,KAAK,uBAAuB;QACxB,OAAO;UACH,GAAGkC,KAAK;UACR9C,gBAAgB,EAAE+C,MAAM,CAACnC;QAC7B,CAAC;MACL,KAAK,YAAY;QACb,OAAO;UACH,GAAGkC,KAAK;UACR7C,MAAM,EAAE8C,MAAM,CAAC9C;QACnB,CAAC;MACL,KAAK,eAAe;QAChB,OAAO;UACH,GAAG6C,KAAK;UACR7C,MAAM,EAAE;YACJ,GAAG6C,KAAK,CAAC7C,MAAM;YACf+C,IAAI,EAAED,MAAM,CAAC9B;UACjB;QACJ,CAAC;MACL,KAAK,eAAe;QAChB,OAAO;UACH,GAAG6B,KAAK;UACR5C,QAAQ,EAAE;YAAE,GAAG4C,KAAK,CAAC5C,QAAQ;YAAE,CAAC6C,MAAM,CAAC5B,GAAG,GAAG4B,MAAM,CAAC3B;UAAM;QAC9D,CAAC;MACL,KAAK,uBAAuB;QACxB,OAAO;UACH,GAAG0B,KAAK;UACRtC,iBAAiB,EAAE;YACf,GAAGsC,KAAK,CAACtC,iBAAiB;YAC1B,CAACuC,MAAM,CAAC5B,GAAG,GAAG4B,MAAM,CAAC3B;UACzB;QACJ,CAAC;IACT;IACA,OAAO0B,KAAK;EAChB,CAAC;EACDpC,OAAO;EACPuC,SAAS,EAAE;IACPd,qBAAqBA,CAACW,KAAK,EAAE;MACzB,OAAOA,KAAK,CAAC/C,kBAAkB;IACnC,CAAC;IACDmD,mBAAmBA,CAACJ,KAAK,EAAE;MACvB,OAAOA,KAAK,CAAC9C,gBAAgB;IACjC,CAAC;IACDmD,SAASA,CAACL,KAAK,EAAE;MACb,OAAOA,KAAK,CAAC7C,MAAM;IACvB,CAAC;IACD0B,WAAWA,CAACmB,KAAK,EAAE;MACf,OAAOA,KAAK,CAAC5C,QAAQ;IACzB,CAAC;IACDkD,oBAAoBA,CAACN,KAAK,EAAE;MACxB,OAAOA,KAAK,CAACtC,iBAAiB;IAClC,CAAC;IACD6C,eAAeA,CAACP,KAAK,EAAE;MACnB,OAAOA,KAAK,CAACQ,WAAW;IAC5B;EACJ,CAAC;EAEDC,SAAS,EAAE;IACPpB,qBAAqB,EACjBA,CAAA,KACA,OAAO;MAAEX;IAAS,CAAC,KAAK;MACpB,MAAMgC,MAAM,GAAG,MAAM7D,2DAAQ,CAAC;QAC1BmC,IAAI,EAAG;MACX,CAAC,CAAC;MACFN,QAAQ,CAACb,qBAAqB,CAAC6C,MAAM,CAAC5C,QAAQ,CAAC;IACnD,CAAC;IACLsC,mBAAmB,EACfA,CAAA,KACA,OAAO;MAAE1B;IAAS,CAAC,KAAK;MACpB,MAAMiC,MAAM,GAAG;QACXC,YAAY,EAAE;MAClB,CAAC;MACD,MAAMjC,WAAW,GAAG,IAAIC,eAAe,CAAC+B,MAAM,CAAC,CAAC7B,QAAQ,CAAC,CAAC;MAC1D,MAAM4B,MAAM,GAAG,MAAM7D,2DAAQ,CAAC;QAC1BmC,IAAI,EAAG,8BAA6BL,WAAY;MACpD,CAAC,CAAC;MACFD,QAAQ,CAACV,mBAAmB,CAAC0C,MAAM,CAAC5C,QAAQ,CAAC;IACjD,CAAC;IACLuC,SAAS,EACLA,CAAA,KACA,OAAO;MAAE3B;IAAS,CAAC,KAAK;MACpB,MAAMgC,MAAM,GAAG,MAAM7D,2DAAQ,CAAC;QAC1BmC,IAAI,EAAG;MACX,CAAC,CAAC;MACFN,QAAQ,CAACT,SAAS,CAACyC,MAAM,CAAC;IAC9B;EACR;AACJ,CAAC,CAAC;AAEF3D,yDAAQ,CAAC+C,KAAK,CAAC;AAER,MAAMe,UAAU,GAAG,8BAA8B;AACjD,MAAMC,aAAa,GAAG9D,aAAa,C","sources":["webpack://webba-booking/external window [\"wp\",\"apiFetch\"]","webpack://webba-booking/external window [\"wp\",\"data\"]","webpack://webba-booking/webpack/bootstrap","webpack://webba-booking/webpack/runtime/compat get default export","webpack://webba-booking/webpack/runtime/define property getters","webpack://webba-booking/webpack/runtime/hasOwnProperty shorthand","webpack://webba-booking/webpack/runtime/make namespace object","webpack://webba-booking/./src/store/frontend/index.js"],"sourcesContent":["module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"data\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import apiFetch from '@wordpress/api-fetch'\r\nimport { createReduxStore, register } from '@wordpress/data'\r\n\r\nconst DEFAULT_STATE = {\r\n    userFutureBookings: null,\r\n    userPastBookings: null,\r\n    preset: {},\r\n    formData: {\r\n        services: [],\r\n        offset: null,\r\n        date: null,\r\n        booking: null,\r\n        time: null,\r\n    },\r\n    dynamicAttributes: {\r\n        timeSlots: null,\r\n    },\r\n}\r\n\r\nconst actions = {\r\n    setUserFutureBookings(bookings) {\r\n        return {\r\n            type: 'SET_USER_FUTURE_BOOKING',\r\n            bookings,\r\n        }\r\n    },\r\n    setUserPastBookings(bookings) {\r\n        return {\r\n            type: 'SET_USER_PAST_BOOKING',\r\n            bookings,\r\n        }\r\n    },\r\n    setPreset(preset) {\r\n        return {\r\n            type: 'SET_PRESET',\r\n            preset,\r\n        }\r\n    },\r\n    setUserName(userName) {\r\n        return {\r\n            type: 'SET_USER_NAME',\r\n            userName,\r\n        }\r\n    },\r\n    setFormData(key, value) {\r\n        return {\r\n            type: 'SET_FORM_DATA',\r\n            key,\r\n            value,\r\n        }\r\n    },\r\n    setDynamicAttribute(key, value) {\r\n        return {\r\n            type: 'SET_DYNAMIC_ATTRIBUTE',\r\n            key,\r\n            value,\r\n        }\r\n    },\r\n    fetchTimeSlots:\r\n        () =>\r\n        async ({ select, dispatch }) => {\r\n            const queryString = new URLSearchParams(\r\n                select.getFormData()\r\n            ).toString()\r\n            const response = await apiFetch({\r\n                path: `/wbk/v2/get-time-slots/?${queryString}`,\r\n            })\r\n\r\n            dispatch.setDynamicAttribute('timeSlots', response.timeslots)\r\n        },\r\n    updateBooking:\r\n        () =>\r\n        async ({ select, dispatch }) => {\r\n            const response = await apiFetch({\r\n                path: `/wbk/v2/update-booking`,\r\n                method: 'POST',\r\n                data: select.getFormData(),\r\n            })\r\n            let bookings = select.getUserFutureBookings()\r\n            const index = bookings.findIndex((booking) => {\r\n                if (!Number.isInteger(Number(booking.id))) {\r\n                    return false\r\n                }\r\n                return booking.id === response.booking.id\r\n            })\r\n            if (index !== -1) {\r\n                bookings[index] = {\r\n                    ...bookings[index],\r\n                    ...response.booking,\r\n                }\r\n            }\r\n            dispatch.setUserFutureBookings(bookings)\r\n        },\r\n    deleteBooking:\r\n        () =>\r\n        async ({ select, dispatch }) => {\r\n            const response = await apiFetch({\r\n                path: `/wbk/v2/delete-booking`,\r\n                method: 'POST',\r\n                data: select.getFormData(),\r\n            })\r\n            let bookings = select.getUserFutureBookings()\r\n            const updatedBookings = bookings.filter(\r\n                (booking) => booking.id !== select.getFormData().booking\r\n            )\r\n            dispatch.setUserFutureBookings(updatedBookings)\r\n        },\r\n}\r\nconst store = createReduxStore('webba_booking/frontend_store', {\r\n    reducer(state = DEFAULT_STATE, action) {\r\n        switch (action.type) {\r\n            case 'SET_USER_FUTURE_BOOKING':\r\n                return {\r\n                    ...state,\r\n                    userFutureBookings: action.bookings,\r\n                }\r\n            case 'SET_USER_PAST_BOOKING':\r\n                return {\r\n                    ...state,\r\n                    userPastBookings: action.bookings,\r\n                }\r\n            case 'SET_PRESET':\r\n                return {\r\n                    ...state,\r\n                    preset: action.preset,\r\n                }\r\n            case 'SET_USER_NAME':\r\n                return {\r\n                    ...state,\r\n                    preset: {\r\n                        ...state.preset,\r\n                        user: action.userName,\r\n                    },\r\n                }\r\n            case 'SET_FORM_DATA':\r\n                return {\r\n                    ...state,\r\n                    formData: { ...state.formData, [action.key]: action.value },\r\n                }\r\n            case 'SET_DYNAMIC_ATTRIBUTE':\r\n                return {\r\n                    ...state,\r\n                    dynamicAttributes: {\r\n                        ...state.dynamicAttributes,\r\n                        [action.key]: action.value,\r\n                    },\r\n                }\r\n        }\r\n        return state\r\n    },\r\n    actions,\r\n    selectors: {\r\n        getUserFutureBookings(state) {\r\n            return state.userFutureBookings\r\n        },\r\n        getUserPastBookings(state) {\r\n            return state.userPastBookings\r\n        },\r\n        getPreset(state) {\r\n            return state.preset\r\n        },\r\n        getFormData(state) {\r\n            return state.formData\r\n        },\r\n        getDynamicAttributes(state) {\r\n            return state.dynamicAttributes\r\n        },\r\n        getSelectedDate(state) {\r\n            return state.seletedDate\r\n        },\r\n    },\r\n\r\n    resolvers: {\r\n        getUserFutureBookings:\r\n            () =>\r\n            async ({ dispatch }) => {\r\n                const result = await apiFetch({\r\n                    path: `/wbk/v2/get-user-bookings/`,\r\n                })\r\n                dispatch.setUserFutureBookings(result.bookings)\r\n            },\r\n        getUserPastBookings:\r\n            () =>\r\n            async ({ dispatch }) => {\r\n                const params = {\r\n                    pastBookings: true,\r\n                }\r\n                const queryString = new URLSearchParams(params).toString()\r\n                const result = await apiFetch({\r\n                    path: `/wbk/v2/get-user-bookings/?${queryString}`,\r\n                })\r\n                dispatch.setUserPastBookings(result.bookings)\r\n            },\r\n        getPreset:\r\n            () =>\r\n            async ({ dispatch }) => {\r\n                const result = await apiFetch({\r\n                    path: `/wbk/v2/get-preset/`,\r\n                })\r\n                dispatch.setPreset(result)\r\n            },\r\n    },\r\n})\r\n\r\nregister(store)\r\n\r\nexport const store_name = 'webba_booking/frontend_store'\r\nexport const default_state = DEFAULT_STATE\r\n"],"names":["apiFetch","createReduxStore","register","DEFAULT_STATE","userFutureBookings","userPastBookings","preset","formData","services","offset","date","booking","time","dynamicAttributes","timeSlots","actions","setUserFutureBookings","bookings","type","setUserPastBookings","setPreset","setUserName","userName","setFormData","key","value","setDynamicAttribute","fetchTimeSlots","select","dispatch","queryString","URLSearchParams","getFormData","toString","response","path","timeslots","updateBooking","method","data","getUserFutureBookings","index","findIndex","Number","isInteger","id","deleteBooking","updatedBookings","filter","store","reducer","state","action","user","selectors","getUserPastBookings","getPreset","getDynamicAttributes","getSelectedDate","seletedDate","resolvers","result","params","pastBookings","store_name","default_state"],"sourceRoot":""}